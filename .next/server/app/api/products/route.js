(()=>{var e={};e.id=3146,e.ids=[3146],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},20385:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>d,serverHooks:()=>k,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{GET:()=>u,runtime:()=>p});var a=r(96559),c=r(48088),i=r(37719),o=r(32190),n=r(79464);let p="nodejs";async function u(e){try{let{searchParams:t}=new URL(e.url),r=t.get("category"),s=t.get("search"),a=t.get("priceRange"),c=t.get("stockStatus"),i=t.get("sortBy")||"newest",p=parseInt(t.get("page")||"1",10),u=parseInt(t.get("pageSize")||"9",10),d={isActive:!0};if(r&&(d.categoryId=r),s&&(d.OR=[{name:{contains:s,mode:"insensitive"}},{description:{contains:s,mode:"insensitive"}}]),a&&"all"!==a)switch(a){case"0-500":d.price={gte:0,lte:500};break;case"500-1000":d.price={gte:500,lte:1e3};break;case"1000-2000":d.price={gte:1e3,lte:2e3};break;case"2000+":d.price={gte:2e3}}if(c&&"all"!==c)switch(c){case"in-stock":d.stock={gt:10};break;case"low-stock":d.stock={gt:0,lte:10};break;case"out-of-stock":d.stock={lte:0}}let l={};switch(i){case"oldest":l={createdAt:"asc"};break;case"price-low":l={price:"asc"};break;case"price-high":l={price:"desc"};break;case"name-asc":l={name:"asc"};break;case"name-desc":l={name:"desc"};break;default:l={createdAt:"desc"}}let[g,k]=await Promise.all([n.z.product.findMany({where:d,orderBy:l,skip:(p-1)*u,take:u,select:{id:!0,name:!0,price:!0,images:!0,slug:!0,categoryId:!0}}),n.z.product.count({where:d})]);return o.NextResponse.json({products:g,total:k})}catch{return o.NextResponse.json({error:"Failed to fetch products"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:c.RouteKind.APP_ROUTE,page:"/api/products/route",pathname:"/api/products",filename:"route",bundlePath:"app/api/products/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\naazbook\\app\\api\\products\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:g,serverHooks:k}=d;function m(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:g})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},79464:(e,t,r)=>{"use strict";r.d(t,{z:()=>a});var s=r(96330);let a=globalThis.prisma??new s.PrismaClient},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{},96559:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,2190],()=>r(20385));module.exports=s})();