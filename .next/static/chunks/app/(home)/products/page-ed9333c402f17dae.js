(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1674],{850:(e,t,s)=>{Promise.resolve().then(s.bind(s,7785))},7785:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var a=s(5155),l=s(2115),i=s(9852),n=s(7168),r=s(7924),c=s(4416),o=s(4736),d=s(3052),u=s(5493),h=s(5713),x=s(6474),m=s(5196),p=s(7863),f=s(3999);function g(e){let{...t}=e;return(0,a.jsx)(h.bL,{"data-slot":"select",...t})}function v(e){let{...t}=e;return(0,a.jsx)(h.WT,{"data-slot":"select-value",...t})}function j(e){let{className:t,size:s="default",children:l,...i}=e;return(0,a.jsxs)(h.l9,{"data-slot":"select-trigger","data-size":s,className:(0,f.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[l,(0,a.jsx)(h.In,{asChild:!0,children:(0,a.jsx)(x.A,{className:"size-4 opacity-50"})})]})}function b(e){let{className:t,children:s,position:l="popper",...i}=e;return(0,a.jsx)(h.ZL,{children:(0,a.jsxs)(h.UC,{"data-slot":"select-content",className:(0,f.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...i,children:[(0,a.jsx)(y,{}),(0,a.jsx)(h.LM,{className:(0,f.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(N,{})]})})}function w(e){let{className:t,children:s,...l}=e;return(0,a.jsxs)(h.q7,{"data-slot":"select-item",className:(0,f.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...l,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(h.VF,{children:(0,a.jsx)(m.A,{className:"size-4"})})}),(0,a.jsx)(h.p4,{children:s})]})}function y(e){let{className:t,...s}=e;return(0,a.jsx)(h.PP,{"data-slot":"select-scroll-up-button",className:(0,f.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(p.A,{className:"size-4"})})}function N(e){let{className:t,...s}=e;return(0,a.jsx)(h.wn,{"data-slot":"select-scroll-down-button",className:(0,f.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(x.A,{className:"size-4"})})}var S=s(2355);function k(){let[e,t]=(0,l.useState)([]),[s,h]=(0,l.useState)([]),[x,m]=(0,l.useState)(0),[p,f]=(0,l.useState)(""),[y,N]=(0,l.useState)(null),[k,C]=(0,l.useState)("all"),[z,A]=(0,l.useState)("all"),[_,P]=(0,l.useState)("newest"),[L,E]=(0,l.useState)(1),[O,T]=(0,l.useState)(!1),{data:I}=(0,u.wV)(),[V,$]=(0,l.useState)([]),[R,W]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("search");e&&f(e)},[]),(0,l.useEffect)(()=>{fetch("/api/categories").then(e=>e.json()).then(t)},[]),(0,l.useEffect)(()=>{T(!0);let e="/api/products?page=".concat(L,"&pageSize=").concat(9);y&&(e+="&category=".concat(y)),p&&(e+="&search=".concat(encodeURIComponent(p))),"all"!==k&&(e+="&priceRange=".concat(k)),"all"!==z&&(e+="&stockStatus=".concat(z)),"newest"!==_&&(e+="&sortBy=".concat(_)),fetch(e).then(e=>e.json()).then(e=>{h(e.products),m(e.total)}).finally(()=>T(!1))},[y,p,k,z,_,L]),(0,l.useEffect)(()=>{(null==I?void 0:I.user)&&fetch("/api/user/wishlist",{credentials:"include"}).then(e=>e.json()).then(e=>$(e.map(e=>e.id)))},[I]);let F=Math.ceil(x/9),M=e=>{E(e),window.scrollTo({top:0,behavior:"smooth"})},U=async e=>{(null==I?void 0:I.user)&&(W(e),V.includes(e)?(await fetch("/api/user/wishlist",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e}),credentials:"include"}),$(V.filter(t=>t!==e))):(await fetch("/api/user/wishlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e}),credentials:"include"}),$([...V,e])),W(null))},Z=()=>{f(""),E(1)};return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 grid grid-cols-1 md:grid-cols-4 gap-8 min-h-screen",children:[(0,a.jsxs)("aside",{className:"md:col-span-1 bg-white rounded-lg shadow p-6 h-fit",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Categories"}),(0,a.jsxs)("ul",{className:"space-y-2 mb-6",children:[(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"w-full text-left px-2 py-1 rounded ".concat(y?"hover:bg-gray-100":"bg-[var(--primary)] text-white"),onClick:()=>N(null),children:"All Products"})}),e.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"w-full text-left px-2 py-1 rounded ".concat(y===e.id?"bg-[var(--primary)] text-white":"hover:bg-gray-100"),onClick:()=>N(e.id),children:e.name})},e.id))]}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Price Range"}),(0,a.jsxs)(g,{value:k,onValueChange:C,children:[(0,a.jsx)(j,{children:(0,a.jsx)(v,{placeholder:"Select price range"})}),(0,a.jsxs)(b,{children:[(0,a.jsx)(w,{value:"all",children:"All Prices"}),(0,a.jsx)(w,{value:"0-500",children:"₹0 - ₹500"}),(0,a.jsx)(w,{value:"500-1000",children:"₹500 - ₹1000"}),(0,a.jsx)(w,{value:"1000-2000",children:"₹1000 - ₹2000"}),(0,a.jsx)(w,{value:"2000+",children:"₹2000+"})]})]}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3 mt-6",children:"Stock Status"}),(0,a.jsxs)(g,{value:z,onValueChange:A,children:[(0,a.jsx)(j,{children:(0,a.jsx)(v,{placeholder:"Select stock status"})}),(0,a.jsxs)(b,{children:[(0,a.jsx)(w,{value:"all",children:"All Items"}),(0,a.jsx)(w,{value:"in-stock",children:"In Stock"}),(0,a.jsx)(w,{value:"low-stock",children:"Low Stock"}),(0,a.jsx)(w,{value:"out-of-stock",children:"Out of Stock"})]})]})]}),(0,a.jsxs)("main",{className:"md:col-span-3",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Products"}),(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:[O?"Loading...":"".concat(x," product").concat(1!==x?"s":""," found"),p&&(0,a.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:['for "',p,'"']})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),E(1)},className:"relative",children:[(0,a.jsx)(r.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(i.p,{type:"search",placeholder:"Search products...",value:p,onChange:e=>f(e.target.value),className:"pl-10 pr-10 max-w-xs"}),p&&(0,a.jsx)(n.$,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 hover:bg-transparent",onClick:Z,children:(0,a.jsx)(c.A,{className:"h-4 w-4 text-gray-400"})})]}),(0,a.jsxs)(g,{value:_,onValueChange:P,children:[(0,a.jsx)(j,{className:"w-40",children:(0,a.jsx)(v,{placeholder:"Sort by"})}),(0,a.jsxs)(b,{children:[(0,a.jsx)(w,{value:"newest",children:"Newest First"}),(0,a.jsx)(w,{value:"oldest",children:"Oldest First"}),(0,a.jsx)(w,{value:"price-low",children:"Price: Low to High"}),(0,a.jsx)(w,{value:"price-high",children:"Price: High to Low"}),(0,a.jsx)(w,{value:"name-asc",children:"Name: A to Z"}),(0,a.jsx)(w,{value:"name-desc",children:"Name: Z to A"})]})]})]})]}),p&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-blue-800",children:["Showing results for: ",(0,a.jsxs)("strong",{children:['"',p,'"']})]}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:Z,className:"text-blue-600 hover:text-blue-800",children:"Clear search"})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:O?(0,a.jsx)("div",{className:"col-span-full text-center text-gray-500 py-12",children:"Loading products..."}):0===s.length?(0,a.jsx)("div",{className:"col-span-full text-center text-gray-500 py-12",children:"No products found."}):s.map(e=>(0,a.jsx)(S.default,{product:e,showWishlist:!0,onWishlistToggle:U,isInWishlist:V.includes(e.id),wishlistLoading:R===e.id},e.id))}),F>1&&(0,a.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,a.jsxs)(n.$,{variant:"outline",onClick:()=>M(L-1),disabled:1===L,children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),"Previous"]}),Array.from({length:Math.min(5,F)},(e,t)=>{let s;return s=F<=5||L<=3?t+1:L>=F-2?F-4+t:L-2+t,(0,a.jsx)(n.$,{variant:L===s?"default":"outline",onClick:()=>M(s),className:"w-10 h-10",children:s},s)}),(0,a.jsxs)(n.$,{variant:"outline",onClick:()=>M(L+1),disabled:L===F,children:["Next",(0,a.jsx)(d.A,{className:"w-4 h-4"})]})]})]})]})}},9852:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(5155);s(2115);var l=s(3999);function i(e){let{className:t,type:s,...i}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,3063,6874,2073,5493,5324,8223,2355,8441,1684,7358],()=>t(850)),_N_E=e.O()}]);