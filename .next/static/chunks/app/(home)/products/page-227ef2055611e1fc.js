(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1674],{850:(e,s,t)=>{Promise.resolve().then(t.bind(t,7785))},7785:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var a=t(5155),l=t(2115),i=t(9852),n=t(7168),r=t(6932),c=t(6474),o=t(4416),d=t(7924),u=t(4736),h=t(3052),x=t(5493),m=t(2665),p=t(5196),f=t(7863),g=t(3999);function j(e){let{...s}=e;return(0,a.jsx)(m.bL,{"data-slot":"select",...s})}function v(e){let{...s}=e;return(0,a.jsx)(m.WT,{"data-slot":"select-value",...s})}function b(e){let{className:s,size:t="default",children:l,...i}=e;return(0,a.jsxs)(m.l9,{"data-slot":"select-trigger","data-size":t,className:(0,g.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...i,children:[l,(0,a.jsx)(m.In,{asChild:!0,children:(0,a.jsx)(c.A,{className:"size-4 opacity-50"})})]})}function w(e){let{className:s,children:t,position:l="popper",...i}=e;return(0,a.jsx)(m.ZL,{children:(0,a.jsxs)(m.UC,{"data-slot":"select-content",className:(0,g.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...i,children:[(0,a.jsx)(y,{}),(0,a.jsx)(m.LM,{className:(0,g.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(k,{})]})})}function N(e){let{className:s,children:t,...l}=e;return(0,a.jsxs)(m.q7,{"data-slot":"select-item",className:(0,g.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...l,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(m.VF,{children:(0,a.jsx)(p.A,{className:"size-4"})})}),(0,a.jsx)(m.p4,{children:t})]})}function y(e){let{className:s,...t}=e;return(0,a.jsx)(m.PP,{"data-slot":"select-scroll-up-button",className:(0,g.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(f.A,{className:"size-4"})})}function k(e){let{className:s,...t}=e;return(0,a.jsx)(m.wn,{"data-slot":"select-scroll-down-button",className:(0,g.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(c.A,{className:"size-4"})})}var S=t(2355);function C(){let[e,s]=(0,l.useState)([]),[t,m]=(0,l.useState)([]),[p,f]=(0,l.useState)(0),[g,y]=(0,l.useState)(""),[k,C]=(0,l.useState)(null),[z,A]=(0,l.useState)("all"),[_,P]=(0,l.useState)("all"),[L,E]=(0,l.useState)("newest"),[O,T]=(0,l.useState)(1),[$,F]=(0,l.useState)(!1),{data:I}=(0,x.wV)(),[V,R]=(0,l.useState)([]),[W,M]=(0,l.useState)(null),[U,Z]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("search");e&&y(e)},[]),(0,l.useEffect)(()=>{fetch("/api/categories").then(e=>e.json()).then(s)},[]),(0,l.useEffect)(()=>{F(!0);let e="/api/products?page=".concat(O,"&pageSize=").concat(9);k&&(e+="&category=".concat(k)),g&&(e+="&search=".concat(encodeURIComponent(g))),"all"!==z&&(e+="&priceRange=".concat(z)),"all"!==_&&(e+="&stockStatus=".concat(_)),"newest"!==L&&(e+="&sortBy=".concat(L)),fetch(e).then(e=>e.json()).then(e=>{m(e.products),f(e.total)}).finally(()=>F(!1))},[k,g,z,_,L,O]),(0,l.useEffect)(()=>{(null==I?void 0:I.user)&&fetch("/api/user/wishlist",{credentials:"include"}).then(e=>e.json()).then(e=>R(e.map(e=>e.id)))},[I]);let D=Math.ceil(p/9),H=e=>{T(e),window.scrollTo({top:0,behavior:"smooth"})},J=async e=>{(null==I?void 0:I.user)&&(M(e),V.includes(e)?(await fetch("/api/user/wishlist",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e}),credentials:"include"}),R(V.filter(s=>s!==e))):(await fetch("/api/user/wishlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e}),credentials:"include"}),R([...V,e])),M(null))},q=()=>{y(""),T(1)};return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 min-h-screen",children:[(0,a.jsx)("div",{className:"lg:hidden mb-6",children:(0,a.jsxs)(n.$,{onClick:()=>Z(!U),variant:"outline",className:"w-full flex items-center justify-center gap-2",children:[(0,a.jsx)(r.A,{className:"w-4 h-4"}),"Filters & Categories",(0,a.jsx)(c.A,{className:"w-4 h-4 transition-transform ".concat(U?"rotate-180":"")})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,a.jsxs)("aside",{className:"lg:col-span-1 bg-white rounded-lg shadow p-6 h-fit transition-all duration-300 ".concat(U?"block":"hidden lg:block"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4 lg:hidden",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Filters"}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>Z(!1),children:(0,a.jsx)(o.A,{className:"w-4 h-4"})})]}),(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 hidden lg:block",children:"Categories"}),(0,a.jsxs)("ul",{className:"space-y-2 mb-6",children:[(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"w-full text-left px-2 py-1 rounded ".concat(k?"hover:bg-gray-100":"bg-[var(--primary)] text-white"),onClick:()=>C(null),children:"All Products"})}),e.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"w-full text-left px-2 py-1 rounded ".concat(k===e.id?"bg-[var(--primary)] text-white":"hover:bg-gray-100"),onClick:()=>C(e.id),children:e.name})},e.id))]}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Price Range"}),(0,a.jsxs)(j,{value:z,onValueChange:A,children:[(0,a.jsx)(b,{children:(0,a.jsx)(v,{placeholder:"Select price range"})}),(0,a.jsxs)(w,{children:[(0,a.jsx)(N,{value:"all",children:"All Prices"}),(0,a.jsx)(N,{value:"0-500",children:"₹0 - ₹500"}),(0,a.jsx)(N,{value:"500-1000",children:"₹500 - ₹1000"}),(0,a.jsx)(N,{value:"1000-2000",children:"₹1000 - ₹2000"}),(0,a.jsx)(N,{value:"2000+",children:"₹2000+"})]})]}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3 mt-6",children:"Stock Status"}),(0,a.jsxs)(j,{value:_,onValueChange:P,children:[(0,a.jsx)(b,{children:(0,a.jsx)(v,{placeholder:"Select stock status"})}),(0,a.jsxs)(w,{children:[(0,a.jsx)(N,{value:"all",children:"All Items"}),(0,a.jsx)(N,{value:"in-stock",children:"In Stock"}),(0,a.jsx)(N,{value:"low-stock",children:"Low Stock"}),(0,a.jsx)(N,{value:"out-of-stock",children:"Out of Stock"})]})]})]}),(0,a.jsxs)("main",{className:"lg:col-span-3",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"Products"}),(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:[$?"Loading...":"".concat(p," product").concat(1!==p?"s":""," found"),g&&(0,a.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:['for "',g,'"']})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),T(1)},className:"relative flex-1",children:[(0,a.jsx)(d.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(i.p,{type:"search",placeholder:"Search products...",value:g,onChange:e=>y(e.target.value),className:"pl-10 pr-10"}),g&&(0,a.jsx)(n.$,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 hover:bg-transparent",onClick:q,children:(0,a.jsx)(o.A,{className:"h-4 w-4 text-gray-400"})})]}),(0,a.jsxs)(j,{value:L,onValueChange:E,children:[(0,a.jsx)(b,{className:"w-full sm:w-40",children:(0,a.jsx)(v,{placeholder:"Sort by"})}),(0,a.jsxs)(w,{children:[(0,a.jsx)(N,{value:"newest",children:"Newest First"}),(0,a.jsx)(N,{value:"oldest",children:"Oldest First"}),(0,a.jsx)(N,{value:"price-low",children:"Price: Low to High"}),(0,a.jsx)(N,{value:"price-high",children:"Price: High to Low"}),(0,a.jsx)(N,{value:"name-asc",children:"Name: A to Z"}),(0,a.jsx)(N,{value:"name-desc",children:"Name: Z to A"})]})]})]})]}),g&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,a.jsxs)("span",{className:"text-sm text-blue-800",children:["Showing results for: ",(0,a.jsxs)("strong",{children:['"',g,'"']})]}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:q,className:"text-blue-600 hover:text-blue-800 self-start sm:self-center",children:"Clear search"})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6 mb-8",children:$?(0,a.jsx)("div",{className:"col-span-full text-center text-gray-500 py-12",children:"Loading products..."}):0===t.length?(0,a.jsx)("div",{className:"col-span-full text-center text-gray-500 py-12",children:"No products found."}):t.map(e=>(0,a.jsx)(S.default,{product:e,showWishlist:!0,onWishlistToggle:J,isInWishlist:V.includes(e.id),wishlistLoading:W===e.id},e.id))}),D>1&&(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-2",children:[(0,a.jsxs)(n.$,{variant:"outline",onClick:()=>H(O-1),disabled:1===O,className:"w-full sm:w-auto",children:[(0,a.jsx)(u.A,{className:"w-4 h-4"}),"Previous"]}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-1",children:Array.from({length:Math.min(5,D)},(e,s)=>{let t;return t=D<=5||O<=3?s+1:O>=D-2?D-4+s:O-2+s,(0,a.jsx)(n.$,{variant:O===t?"default":"outline",onClick:()=>H(t),className:"w-8 h-8 sm:w-10 sm:h-10 text-sm",children:t},t)})}),(0,a.jsxs)(n.$,{variant:"outline",onClick:()=>H(O+1),disabled:O===D,className:"w-full sm:w-auto",children:["Next",(0,a.jsx)(h.A,{className:"w-4 h-4"})]})]})]})]})]})}},9852:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var a=t(5155);t(2115);var l=t(3999);function i(e){let{className:s,type:t,...i}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...i})}}},e=>{var s=s=>e(e.s=s);e.O(0,[4277,3063,6874,2073,5493,409,7791,2355,8441,1684,7358],()=>s(850)),_N_E=e.O()}]);