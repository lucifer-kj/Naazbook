(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9408],{212:(e,t,s)=>{Promise.resolve().then(s.bind(s,3532))},677:(e,t,s)=>{"use strict";s.d(t,{ToastProvider:()=>n,d:()=>i});var a=s(5155),r=s(2115);let l=(0,r.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,r.useState)([]),i=(0,r.useCallback)((e,t)=>{let s=Date.now();n(a=>[...a,{id:s,message:e,type:t}]),setTimeout(()=>{n(e=>e.filter(e=>e.id!==s))},3500)},[]);return(0,a.jsxs)(l.Provider,{value:{showToast:i},children:[t,(0,a.jsx)(o,{toasts:s})]})}function i(){let e=(0,r.useContext)(l);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function o(e){let{toasts:t}=e;return(0,a.jsx)("div",{className:"fixed bottom-6 right-6 z-[9999] flex flex-col gap-3",children:t.map(e=>(0,a.jsx)("div",{className:"px-6 py-3 rounded-xl shadow-lg text-white font-semibold text-base animate-fade-in-down\n            ".concat("success"===e.type?"bg-green-600":"error"===e.type?"bg-red-600":"bg-secondary","\n          "),role:"alert",children:e.message},e.id))})}},879:(e,t,s)=>{"use strict";s.d(t,{JH:()=>i,SJ:()=>o,bm:()=>d,jf:()=>n});var a=s(5155);s(2115);var r=s(2073),l=s(3999);function n(e){let{children:t,className:s,interactive:n=!0,highlight:i=!1,gradient:o=!1,gradientColors:d="from-primary/20 to-secondary/20",onClick:c}=e,u=(0,l.cn)("relative overflow-hidden rounded-2xl p-6 shadow-lg","backdrop-blur-md border border-white/10",i&&"glass-card-highlight",o?"bg-gradient-to-br ".concat(d):"bg-gradient-to-br from-white/10 to-white/5",s);return n?(0,a.jsx)(r.P.div,{className:u,whileHover:{scale:1.01},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:20},onClick:c,children:t}):(0,a.jsx)("div",{className:u,onClick:c,children:t})}function i(e){let{children:t,className:s,onClick:n,disabled:i=!1,type:o="button"}=e;return(0,a.jsx)(r.P.button,{className:(0,l.cn)("px-4 py-2 rounded-full","bg-white/20 backdrop-blur-md","border border-white/20 shadow-sm","text-sm font-medium","hover:bg-white/30 transition-colors",i&&"opacity-50 cursor-not-allowed",s),whileHover:i?{}:{scale:1.05},whileTap:i?{}:{scale:.95},onClick:n,disabled:i,type:o,children:t})}function o(e){let{children:t,className:s,variant:r="default"}=e;return(0,a.jsx)("span",{className:(0,l.cn)("px-3 py-1 rounded-full text-xs font-medium backdrop-blur-md",{default:"bg-slate-500/80 text-white",success:"bg-emerald-500/80 text-white",warning:"bg-amber-500/80 text-white",danger:"bg-rose-500/80 text-white",info:"bg-blue-500/80 text-white",primary:"bg-primary/80 text-white",secondary:"bg-secondary/80 text-white"}[r],s),children:t})}function d(e){let{children:t,className:s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("bg-white/5 backdrop-blur-lg border border-white/10 rounded-3xl shadow-xl",s),children:t})}},1007:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1469:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return o},getImageProps:function(){return i}});let a=s(8466),r=s(8883),l=s(3063),n=a._(s(1193));function i(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let o=l.Image},3532:(e,t,s)=>{"use strict";s.d(t,{default:()=>f});var a=s(5155),r=s(1007),l=s(9946);let n=(0,l.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),i=(0,l.A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),o=(0,l.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var d=s(879),c=s(6766),u=s(2115),x=s(9840),h=s(9852),m=s(7168),p=s(677);function f(e){let{user:t,stats:s}=e,l=t.image&&t.image.startsWith("http")?t.image:"",f=t.name||"User",b=t.email||"",g=t.memberSince||"",j={ordersCount:"number"==typeof s.ordersCount?s.ordersCount:0,addressesCount:"number"==typeof s.addressesCount?s.addressesCount:0,wishlistCount:"number"==typeof s.wishlistCount?s.wishlistCount:0},[w,v]=(0,u.useState)(!1),[y,N]=(0,u.useState)(!1),[C,k]=(0,u.useState)(!1),[P,S]=(0,u.useState)({name:t.name,email:t.email}),[A,T]=(0,u.useState)({password:"",newPassword:"",confirm:""}),[E,F]=(0,u.useState)(!1),{showToast:O}=(0,p.d)(),[D,M]=(0,u.useState)(null),[H,q]=(0,u.useState)(!1),[J,$]=(0,u.useState)(null),[_,L]=(0,u.useState)(null),[z,I]=(0,u.useState)(""),[Q,R]=(0,u.useState)(!1);(0,u.useEffect)(()=>{fetch("/api/user/profile").then(e=>e.json()).then(e=>{var t;return M(null!=(t=e.mfaEnabled)&&t)})},[]);let U=async()=>{q(!0);let e=await fetch("/api/user/mfa",{method:"POST"});if(e.ok){let t=await e.json();$(t.qr),L(t.secret),R(!0)}else O("Failed to start MFA setup","error");q(!1)},V=async e=>{e.preventDefault(),q(!0);let t=await fetch("/api/user/mfa",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:z})});t.ok?(O("MFA enabled!","success"),M(!0),R(!1),$(null),L(null),I("")):O((await t.json()).error||"Failed to enable MFA","error"),q(!1)},G=async()=>{q(!0),(await fetch("/api/user/mfa",{method:"DELETE"})).ok?(O("MFA disabled","success"),M(!1)):O("Failed to disable MFA","error"),q(!1)},W=async e=>{e.preventDefault(),F(!0);let t=await fetch("/api/user/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});F(!1),t.ok?(O("Profile updated","success"),v(!1),window.location.reload()):O((await t.json()).error||"Failed to update profile","error")},X=async e=>{if(e.preventDefault(),A.newPassword!==A.confirm)return void O("Passwords do not match","error");F(!0);let t=await fetch("/api/user/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:A.password,newPassword:A.newPassword})});F(!1),t.ok?(O("Password changed","success"),N(!1),T({password:"",newPassword:"",confirm:""})):O((await t.json()).error||"Failed to change password","error")},Z=async()=>{F(!0);let e=await fetch("/api/user/profile",{method:"DELETE"});F(!1),e.ok?(O("Account deleted","success"),window.location.href="/"):O((await e.json()).error||"Failed to delete account","error")};try{return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"min-h-screen py-12 px-4",style:{background:"linear-gradient(135deg, rgba(248,247,255,1) 0%, rgba(250,247,254,1) 35%, rgba(245,251,255,1) 100%)",backgroundAttachment:"fixed"},children:(0,a.jsxs)("div",{className:"container mx-auto max-w-5xl",children:[(0,a.jsx)(d.jf,{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 items-center md:items-start",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"h-28 w-28 rounded-full overflow-hidden bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center shadow-lg border border-white/20",children:l?(0,a.jsx)(c.default,{src:l,alt:f,width:112,height:112,className:"h-full w-full object-cover",style:{width:"100%",height:"auto"}}):(0,a.jsx)(r.A,{className:"h-12 w-12 text-primary/60"})}),(0,a.jsx)("button",{className:"absolute bottom-0 right-0 bg-white rounded-full p-2 shadow-md hover:bg-gray-50 transition-colors",children:(0,a.jsx)(n,{className:"h-4 w-4 text-primary"})})]}),(0,a.jsxs)("div",{className:"flex-1 text-center md:text-left",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:f}),(0,a.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center md:justify-start gap-2 text-slate-700",children:[(0,a.jsx)(i,{className:"h-4 w-4 text-primary"}),(0,a.jsx)("span",{children:b})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center md:justify-start gap-2 text-slate-700",children:[(0,a.jsx)(o,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("span",{children:["Member since ",g]})]})]})]}),(0,a.jsx)("div",{className:"md:self-start",children:(0,a.jsx)(d.JH,{className:"px-6 py-2.5 bg-gradient-to-r from-primary to-secondary text-white",onClick:()=>v(!0),children:"Edit Profile"})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsx)(d.jf,{className:"text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-blue-500/10 mb-3",children:(0,a.jsx)(r.A,{className:"h-6 w-6 text-blue-500"})}),(0,a.jsx)("p",{className:"text-3xl font-bold text-slate-800",children:j.ordersCount}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Orders"})]})}),(0,a.jsx)(d.jf,{className:"text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-rose-500/10 mb-3",children:(0,a.jsx)(o,{className:"h-6 w-6 text-rose-500"})}),(0,a.jsx)("p",{className:"text-3xl font-bold text-slate-800",children:j.wishlistCount}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Wishlist Items"})]})}),(0,a.jsx)(d.jf,{className:"text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-emerald-500/10 mb-3",children:(0,a.jsx)(i,{className:"h-6 w-6 text-emerald-500"})}),(0,a.jsx)("p",{className:"text-3xl font-bold text-slate-800",children:j.addressesCount}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Saved Addresses"})]})})]}),(0,a.jsx)(d.bm,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Account Security"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-6 border-b border-slate-200/20",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Password"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Last changed: Never"})]}),(0,a.jsx)(d.JH,{onClick:()=>N(!0),children:"Change Password"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-6 border-b border-slate-200/20",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Two-Factor Authentication"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:null===D?"Checking...":D?"Enabled (TOTP)":"Not enabled"})]}),D?(0,a.jsx)(d.JH,{onClick:G,disabled:H,children:H?"Disabling...":"Disable 2FA"}):(0,a.jsx)(d.JH,{onClick:U,disabled:H,children:H?"Loading...":"Enable 2FA"})]}),Q&&(0,a.jsx)(x.l,{open:Q,onOpenChange:R,children:(0,a.jsxs)(x.l.Content,{children:[(0,a.jsx)(x.l.Title,{children:"Set up Two-Factor Authentication"}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[J&&(0,a.jsx)(c.default,{src:J,alt:"MFA QR Code",width:160,height:160,className:"w-40 h-40"}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Scan this QR code with Google Authenticator or a compatible app."}),_&&(0,a.jsxs)("p",{className:"text-xs text-slate-500 break-all",children:["Secret: ",_]}),(0,a.jsxs)("form",{onSubmit:V,className:"w-full flex flex-col gap-3 mt-2",children:[(0,a.jsx)(h.p,{placeholder:"Enter 6-digit code",value:z,onChange:e=>I(e.target.value),required:!0,maxLength:6,pattern:"[0-9]{6}"}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,a.jsx)(m.$,{type:"button",variant:"outline",onClick:()=>R(!1),children:"Cancel"}),(0,a.jsx)(m.$,{type:"submit",disabled:H,children:H?"Verifying...":"Verify & Enable"})]})]})]})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Account Deletion"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"This action cannot be undone"})]}),(0,a.jsx)(d.JH,{className:"bg-rose-500/10 text-rose-500 hover:bg-rose-500/20",onClick:()=>k(!0),children:"Delete Account"})]})]})]})})]})}),(0,a.jsx)(x.l,{open:w,onOpenChange:v,children:(0,a.jsxs)(x.l.Content,{children:[(0,a.jsx)(x.l.Title,{children:"Edit Profile"}),(0,a.jsxs)("form",{onSubmit:W,className:"space-y-4",children:[(0,a.jsx)(h.p,{placeholder:"Name",value:P.name,onChange:e=>S(t=>({...t,name:e.target.value})),required:!0}),(0,a.jsx)(h.p,{placeholder:"Email",type:"email",value:P.email,onChange:e=>S(t=>({...t,email:e.target.value})),required:!0}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,a.jsx)(m.$,{type:"button",variant:"outline",onClick:()=>v(!1),children:"Cancel"}),(0,a.jsx)(m.$,{type:"submit",disabled:E,children:E?"Saving...":"Save"})]})]})]})}),(0,a.jsx)(x.l,{open:y,onOpenChange:N,children:(0,a.jsxs)(x.l.Content,{children:[(0,a.jsx)(x.l.Title,{children:"Change Password"}),(0,a.jsxs)("form",{onSubmit:X,className:"space-y-4",children:[(0,a.jsx)(h.p,{placeholder:"Current Password",type:"password",value:A.password,onChange:e=>T(t=>({...t,password:e.target.value})),required:!0}),(0,a.jsx)(h.p,{placeholder:"New Password",type:"password",value:A.newPassword,onChange:e=>T(t=>({...t,newPassword:e.target.value})),required:!0}),(0,a.jsx)(h.p,{placeholder:"Confirm New Password",type:"password",value:A.confirm,onChange:e=>T(t=>({...t,confirm:e.target.value})),required:!0}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,a.jsx)(m.$,{type:"button",variant:"outline",onClick:()=>N(!1),children:"Cancel"}),(0,a.jsx)(m.$,{type:"submit",disabled:E,children:E?"Saving...":"Change"})]})]})]})}),(0,a.jsx)(x.l,{open:C,onOpenChange:k,children:(0,a.jsxs)(x.l.Content,{children:[(0,a.jsx)(x.l.Title,{children:"Delete Account"}),(0,a.jsx)("p",{className:"mb-4",children:"Are you sure you want to delete your account? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,a.jsx)(m.$,{type:"button",variant:"outline",onClick:()=>k(!1),children:"Cancel"}),(0,a.jsx)(m.$,{type:"button",variant:"destructive",onClick:Z,disabled:E,children:E?"Deleting...":"Delete"})]})]})})]})}catch(e){return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center text-red-600 font-bold",children:"Error loading profile. Please try again later."})}}},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(2596),r=s(9688);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},6766:(e,t,s)=>{"use strict";s.d(t,{default:()=>r.a});var a=s(1469),r=s.n(a)},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>i});var a=s(5155),r=s(2115),l=s(3999),n=s(9708);let i=(0,r.forwardRef)(function(e,t){let{className:s,variant:r="default",size:i="default",asChild:o=!1,...d}=e,c=o?n.DX:"button";return(0,a.jsx)(c,{ref:t,...d,className:(0,l.cn)("min-h-[44px] rounded-full font-semibold focus:outline-none focus:ring-2 focus:ring-secondary transition-all","text-base sm:text-lg","default"===r&&"bg-[var(--primary)] text-white hover:bg-[var(--primary-dark)]","destructive"===r&&"bg-red-500 text-white hover:bg-red-600","outline"===r&&"border border-gray-300 bg-transparent hover:bg-gray-100","secondary"===r&&"bg-gray-200 text-gray-800 hover:bg-gray-300","ghost"===r&&"bg-transparent hover:bg-gray-100","link"===r&&"bg-transparent text-[var(--primary)] underline-offset-4 hover:underline","default"===i&&"px-4 py-2","sm"===i&&"px-3 py-1.5 text-sm","lg"===i&&"px-6 py-3","icon"===i&&"p-2 min-w-[44px] aspect-square",s)})})},9840:(e,t,s)=>{"use strict";s.d(t,{l:()=>n});var a=s(5155);s(2115);var r=s(237),l=s(4416);function n(e){let{open:t,onOpenChange:s,children:l}=e;return(0,a.jsx)(r.bL,{open:t,onOpenChange:s,children:l})}n.Trigger=r.l9,n.Content=function(e){let{className:t="",children:s}=e;return(0,a.jsxs)(r.ZL,{children:[(0,a.jsx)(r.hJ,{className:"fixed inset-0 bg-black/40 z-50"}),(0,a.jsxs)(r.UC,{className:"fixed left-1/2 top-1/2 z-50 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 rounded-xl bg-white p-6 shadow-xl focus:outline-none ".concat(t),children:[(0,a.jsx)(r.bm,{asChild:!0,children:(0,a.jsx)("button",{className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 focus:outline-none","aria-label":"Close",children:(0,a.jsx)(l.A,{className:"w-6 h-6"})})}),s]})]})},n.Title=function(e){let{className:t="",children:s}=e;return(0,a.jsx)(r.hE,{className:"text-xl font-bold mb-2 ".concat(t),children:s})}},9852:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var a=s(5155);s(2115);var r=s(3999);function l(e){let{className:t,type:s,...l}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...l})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,3063,6360,409,237,8441,1684,7358],()=>t(212)),_N_E=e.O()}]);